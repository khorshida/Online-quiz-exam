<!DOCTYPE html>
<html>
<head>
    <title>Online Test System</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>

    <h1>Online Test System</h1>

    <!-- Navigation Buttons -->
    <table>
        <tr>
            <td><input type="button" value="Categories" onclick="showSection('categorySection')"/></td>
            <td><input type="button" value="Timed Tests" onclick="showSection('timedTestSection')"/></td>
            <td><input type="button" value="Dashboard" onclick="showSection('dashboardSection')"/></td>
            <!-- Add more buttons for other features here -->
        </tr>
    </table>

    <!-- Categories Section -->
    <div id="categorySection" style="display: block;">
        <title>Test Categories</title>
    <link rel="stylesheet" type="text/css" href="style.css">


    <h1>Test Categories</h1>

    <table>
        <tr>
            <td>
                <input type="button" value="Categories" onclick="showCategories()"/>
                <input type="button" value="Tests" onclick="showTests()"/>
            </td>
        </tr>
    </table>

    <div id="categoryDiv" style="display: block;">
        <fieldset>
            <legend>Add Category</legend>
            <table>
                <tr>
                    <td>Parent:</td>
                    <td>
                        <select id="parent">
                            <option value="">None</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>Name:</td>
                    <td>
                        <input type="text" id="name"/>
                        <p id="msg" style="color: red;"></p>
                    </td>
                </tr>
                <tr>
                    <td>Level:</td>
                    <td>
                        <select id="level">
                            <option value="basic">Basic</option>
                            <option value="medium">Medium</option>
                            <option value="advanced">Advanced</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td><input type="button" value="Add" onclick="add()"/></td>
                </tr>
            </table>
        </fieldset>

        <div id="list"></div>
    </div>

    <div id="testDiv" style="display: none;">
        <fieldset>
            <legend>Assign Tests</legend>
            <table>
                <tr>
                    <td>Category:</td>
                    <td><select id="category" onchange="updateTests()"></select></td>
                </tr>
                <tr>
                    <td>Tests:</td>
                    <td><select id="tests" multiple></select></td>
                </tr>
                <tr>
                    <td></td>
                    <td><input type="button" value="Assign" onclick="assign()"/></td>
                </tr>
            </table>
        </fieldset>
    </div>
    </div>

    <!-- Timed Test Section -->
    <div id="timedTestSection" style="display: none;">
       <title>Timed Tests</title>
    <link rel="stylesheet" type="text/css" href="style.css">


    <h1>Timed Tests</h1>

    <!-- Timer Settings Screen -->
    <div id="timerScreen">
        <form>   
            <fieldset>
                <legend>Timer Settings</legend>
                <table>
                    <tr>
                        <td>Test Duration (minutes)</td>
                        <td>
                            <input type="text" id="testDuration" value=""/>
                            <p id="durationMsg" style="color: red;"></p>
                        </td>
                    </tr>
                    <tr>
                        <td>Question Duration (minutes)</td>
                        <td>
                            <input type="text" id="questionDuration" value=""/>
                            <p id="questionMsg" style="color: red;"></p>
                        </td>
                    </tr>
                    <tr>
                        <td></td>
                        <td>
                            <input type="button" value="Start Test" onclick="startTest()"/>
                        </td>
                    </tr>
                </table>
            </fieldset>
        </form>
    </div>

    <!-- Countdown Display Screen -->
    <div id="countdownScreen" style="display: none;">
        <fieldset>
            <legend>Test in Progress</legend>
            <table>
                <tr>
                    <td>Time Remaining:</td>
                    <td><span id="timeDisplay"></span></td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <input type="button" value="End Test" onclick="endTest()"/>
                        <input type="button" value="Add Time" onclick="addTime()"/>
                    </td>
                </tr>
            </table>
        </fieldset>
    </div>
    </div>

    <!-- Dashboard Section -->
    <div id="dashboardSection" style="display: none;">
        

        <title>Dashboard</title>
    <link rel="stylesheet" type="text/css" href="style.css">


    <div>
        <h1>Dashboard</h1>
    </div>
    <div>
        <div>
            <div class="navigation">
                <input type="button" value="Home Dashboard" onclick="showScreen('homeDashboard')">
                <input type="button" value="Analytics" onclick="showScreen('analytics')">
            </div>
        </div>
        <div>
            <div id="homeDashboard" class="screen">
                <h2>Home Dashboard</h2>
                <div style="display:flex; justify-content:space-around; margin-bottom:20px;">
                    <div
                        onclick="showDetails('widget1')"
                        style="background-color:#fff; padding:15px; border:1px solid #ddd; width:200px; text-align:center; cursor:pointer;"
                    >
                        <h3 style="margin-bottom: 10px;">Widget 1</h3>
                        <p>Summary of Data 1</p>
                    </div>
                    <div
                        onclick="showDetails('widget2')"
                        style="background-color:#fff; padding:15px; border:1px solid #ddd; width:200px; text-align:center; cursor:pointer;"
                    >
                        <h3 style="margin-bottom: 10px;">Widget 2</h3>
                        <p>Summary of Data 2</p>
                    </div>
                </div>
                <div>
                    <h2>Quick Actions</h2>
                    <ul>
                        <li><button onclick="exportTranscripts()">Export Personal Result Transcripts</button></li>
                        <li><button onclick="compareScores()">Compare Scores Across Test Versions</button></li>
                        <li><button onclick="viewHistory()">View Attempt History</button></li>
                    </ul>
                </div>
            </div>

            <div id="analytics" class="screen" style="display:none;">
                <h2>Analytics</h2>
                <p>Analytics data will be displayed here.</p>
            </div>

            <div id="transcripts" class="screen" style="display:none;">
                <div>
                    <h2>Personal Result Transcripts</h2>
                    <p>Displays the result Transcripts</p>
                </div>
            </div>

            <div id="scoreComparison" class="screen" style="display:none;">
                <div>
                    <h2>Score Comparison</h2>
                    <p>Displays the Score Comparison across different versions</p>
                </div>
            </div>

            <div id="history" class="screen" style="display:none;">
                <div>
                    <h2>Attempt History</h2>
                    <p>Show the attempt history with date and timestamps</p>
                </div>
            </div>

        </div>
    </div>

        <p>Welcome to the Dashboard.</p>
    </div>

    <script>
        function showSection(sectionId) {
            var sections = ['categorySection', 'timedTestSection', 'dashboardSection'];
            for(var i = 0; i < sections.length; i++) {
                if(sections[i] == sectionId) {
                    document.getElementById(sections[i]).style.display = "block";
                } else {
                    document.getElementById(sections[i]).style.display = "none";
                }
            }
        }

        var categories = [];
        var count = 0;

        function showCategories() {
            document.getElementById("categoryDiv").style.display = "block";
            document.getElementById("testDiv").style.display = "none";
            updateParents();
            displayList();
        }

        function showTests() {
            document.getElementById("categoryDiv").style.display = "none";
            document.getElementById("testDiv").style.display = "block";
            updateCategories();
        }

        function add() {
            var parent = document.getElementById("parent").value;
            var name = document.getElementById("name").value;
            var level = document.getElementById("level").value;
            var msg = document.getElementById("msg");

            msg.innerHTML = "";

            if(name == "") {
                msg.innerHTML = "please enter name";
                return;
            }

            categories[count] = [parent, name, level];
            count = count + 1;

            document.getElementById("name").value = "";
            updateParents();
            displayList();
        }

        function updateParents() {
            var select = document.getElementById("parent");
            var content = "<option value=''>None</option>";

            for(var i = 0; i < count; i++) {
                content = content + "<option value='" + i + "'>";
                content = content + categories[i][1];
                content = content + "</option>";
            }

            select.innerHTML = content;
        }

        function displayList() {
            var list = document.getElementById("list");
            var content = "";

            for(var i = 0; i < count; i++) {
                content = content + "<fieldset>";
                content = content + "<legend>" + categories[i][1] + "</legend>";
                content = content + "<table>";
                
                if(categories[i][0] != "") {
                    content = content + "<tr><td>Parent:</td><td>";
                    content = content + categories[categories[i][0]][1];
                    content = content + "</td></tr>";
                }
                
                content = content + "<tr><td>Level:</td><td>";
                content = content + categories[i][2];
                content = content + "</td></tr>";
                content = content + "</table></fieldset>";
            }

            list.innerHTML = content;
        }

        function updateCategories() {
            var select = document.getElementById("category");
            var content = "";

            for(var i = 0; i < count; i++) {
                content = content + "<option value='" + i + "'>";
                content = content + categories[i][1];
                content = content + "</option>";
            }

            select.innerHTML = content;
            updateTests();
        }

        function updateTests() {
            var tests = document.getElementById("tests");
            var content = "";

            content = content + "<option>Test 1</option>";
            content = content + "<option>Test 2</option>";
            content = content + "<option>Test 3</option>";

            tests.innerHTML = content;
        }

        function assign() {
            var category = document.getElementById("category");
            var tests = document.getElementById("tests");
            var selected = [];

            for(var i = 0; i < tests.options.length; i++) {
                if(tests.options[i].selected == true) {
                    selected[selected.length] = tests.options[i].text;
                }
            }

            var selectedCategoryIndex = parseInt(category.value);
            var categoryName = "";
            if(!isNaN(selectedCategoryIndex) && categories[selectedCategoryIndex]) {
                categoryName = categories[selectedCategoryIndex][1];
            }

            alert("Assigned to " + categoryName + ": " + selected.join(", "));
        }

        showCategories();

        //timed tests

        var testTime = 0;
        var questionTime = 0;
        var timeLeft = 0;
        var timerInterval;

        function startTest() {
            var testInput = document.getElementById("testDuration").value;
            var questionInput = document.getElementById("questionDuration").value;
            var durationMsg = document.getElementById("durationMsg");
            var questionMsg = document.getElementById("questionMsg");

            durationMsg.innerHTML = "";
            questionMsg.innerHTML = "";

            if(testInput == "") {
                durationMsg.innerHTML = "please enter test duration!";
                return;
            }

            if(questionInput == "") {
                questionMsg.innerHTML = "please enter question duration!";
                return;
            }

            testTime = parseInt(testInput);
            questionTime = parseInt(questionInput);
            timeLeft = testTime * 60;

            document.getElementById("timerScreen").style.display = "none";
            document.getElementById("countdownScreen").style.display = "block";

            startTimer();
        }

        function startTimer() {
            timerInterval = setInterval(updateTimer, 1000);
        }

        function updateTimer() {
            var minutes = Math.floor(timeLeft / 60);
            var seconds = timeLeft % 60;
            
            document.getElementById("timeDisplay").innerHTML = 
                minutes + ":" + (seconds < 10 ? "0" : "") + seconds;

            if(timeLeft <= 0) {
                endTest();
            } else {
                timeLeft = timeLeft - 1;
            }
        }

        function endTest() {
            clearInterval(timerInterval);
            document.getElementById("timerScreen").style.display = "block";
            document.getElementById("countdownScreen").style.display = "none";
        }

        function addTime() {
            timeLeft = timeLeft + (5 * 60);
            updateTimer();
        }

//dashboard

         //Basic screen switching function
        function showScreen(screenId) {
            var screens = document.getElementsByClassName('screen');
            for (var i = 0; i < screens.length; i++) {
                screens[i].style.display = 'none';
            }
            document.getElementById(screenId).style.display = 'block';
        }

        function showDetails(widgetId) {
            alert('Details for ' + widgetId + ' will be shown here.  The widget ID is: ' + widgetId);
        }

        function exportTranscripts() {
            alert('Exporting Transcripts...'); // Changed to show an alert
        }

        function compareScores() {
            showScreen('scoreComparison');
        }

        function viewHistory() {
            showScreen('history');
        }

        // Initialize
        showScreen('homeDashboard');
    </script>

</body>
</html>
